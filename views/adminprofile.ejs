<%- include('partials/header.ejs',{ hide : true,user : false }) %>

<div class="main">

  <!-- left side bar -->
  <div class="left">
    <div class="side">
      <a class="nav-link" href="">Attendence</a>
    </div>
    <div class="side">
      <a class="nav-link" href="">complaint</a>
    </div>
    <div class="side">
      <a class="nav-link" href="">Change Menu</a>
    </div>
    <div class="side">
      <a class="nav-link" href="">information</a>
    </div>
  </div>

  <!-- right whole page of the page -->
  <div class="right">

      <!-- upper content of the right half -->
    <div class="upper">
      <div class="leftupper">
        <div class="let">
          Complaint Overview
        </div>

        <div class="dataset">
          <div class="uppercontent">
            <div class="leftdesign" style="background-color: lightsalmon"></div>
            <div class="rightdesign">
              open
              <div class="number"><%= opena %></div>
            </div>

          </div>

          <div class="uppercontent">
            <div class="leftdesign" style="background-color: lightgreen"></div>
            <div class="rightdesign">
              closed
              <div class="number"><%= closea %></div>
            </div>
            
          </div>

          <div class="uppercontent">
            <div class="leftdesign" style="background-color: lightskyblue"></div>
            <div class="rightdesign">
              in progress
              <div class="number"><%= inprogressa %></div>
            </div> 
          </div>
        </div>

      </div>
      <!-- for chart  -->
      <div class="rightupper">
        <div class="numberbtwchart"><%= inprogressa+closea+opena %></div>
        <div class="chart">
          <canvas id="myChart"></canvas>
        </div>
      </div>
      
    </div>
   
    <!-- lower part of the right page -->
    <div class="lower">
      <div>
        <form action="/adminprofile" method="post">
            <button class="btn btn-light" type="submit" value="all" name="choose">Open</button>
            <button class="btn btn-light" type="submit" value="initiated" name="choose">Initiated</button>
            <button class="btn btn-light" type="submit" value="completed" name="choose">Completed</button>
        </form>
      </div>


      <div class="llower" style="background-color: rgb(250, 238, 222);;">
        <div class="use">User</div>
        <div class="use">User's Complaint</div>
        <div class="init" <% if (view!==0) { %>
          style="display: none;"
        <% } %>>initiate</div>
        <div class="done" <% if (view===2) { %>
          style="display: none;"
        <% } %>>done</div>
      </div>


      <div class="scrollable-container" style="height: 90%;">
        <% if (complaints.length>0) { %> <% complaints.forEach(complaint => { %>
        <div class="complaints scrollable-content">
          <div class="user"><%= complaint.username %></div>
          <div class="usercomplaint"><%= complaint.complaint %></div>

          <% if (complaint.status=="open") { %>
            <div class="tick1">
                <input type="checkbox" data-value1="tick1" data-value2="<%= complaint.id %>" name="solve" id="checkbox1">
            </div> 
          <% } %>
          <% if (complaint.status!=="close") { %>
              <div class="tick2">
                <input type="checkbox"  data-value1="tick2" data-value2="<%= complaint.id %>" name="solve" id="checkbox2"/>
              </div>
          <% } %>
        </div>
        <% }); %>
        <% } else { %>
          <p>No Complaint found</p>
          <% } %>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer.ejs') %>
